{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getData(userInput, page) {\n    try {\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: '42630881-770530465aa98d154d18ed059',\n                q: userInput,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: 15,\n                page: page,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error(`Error: ${response.status}`);\n        return [];\n    }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nlet lightbox = new SimpleLightbox('.gallery-link', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createMarkup(data) {\n    // gallery.innerHTML = ``;\n\n    if (data.hits.length === 0) {\n        return iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: \"topRight\"\n        });\n    }\n    const markup = data.hits.map(item =>\n        `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n                    <img class=\"gallery-image\" src=\"${item.webformatURL}\" alt=\"${item.tags}\">\n                </a>\n            <div class=\"gallery-info\">\n                <p class=\"card\">Likes <span class=\"card-value\">${item.likes}</span></p>\n                <p class=\"card\">Views <span class=\"card-value\">${item.views}</span></p>\n                <p class=\"card\">Comments <span class=\"card-value\">${item.comments}</span></p>\n                <p class=\"card\">Downloads <span class=\"card-value\">${item.downloads}</span></p>\n            </div>\n        </li>`\n    ).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh()\n}\n\n\n","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nimport { getData } from './js/pixabay-api.js';\nimport { createMarkup } from './js/render-functions.js';\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".form-input\");\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.btn-load')\n\nlet page;\nlet maxPage;\nlet value;\n// let simplelightboxInstance = null;\n\n\nform.addEventListener(\"submit\", onFormSubmit);\n\nasync function onFormSubmit(event) {\n    event.preventDefault();\n    page = 1;\n    value = input.value.trim()\n\n    if (value === '') {\n        form.reset()\n\n        return iziToast.error({\n            message: 'Enter search image name',\n            position: \"topRight\"\n        });\n\n    }\n\n    loader.classList.remove('visually-hidden');\n    try {\n        const data = await getData(value, page);\n        maxPage = Math.ceil(data.total / 15);\n\n        gallery.innerHTML = ``;\n\n        createMarkup(data);\n    } catch (err) {\n        console.log(err);\n    }\n\n    loader.classList.add('visually-hidden');\n    visabilityloadBtn()\n    form.reset();\n};\n\nloadBtn.addEventListener('click', onClickBtn);\n\nasync function onClickBtn() {\n    page += 1;\n\n    loader.classList.remove('visually-hidden');\n\n    if (page === maxPage) {\n        iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: \"topRight\"\n        });\n    };\n\n    const data = await getData(value, page);\n\n    createMarkup(data);\n\n    loader.classList.add('visually-hidden');\n    visabilityloadBtn()\n\n\n    const height =\n        gallery.firstElementChild.getBoundingClientRect().height;\n\n    scrollBy({\n        behavior: 'smooth',\n        top: height * 2,\n    });\n};\n\nfunction visabilityloadBtn() {\n    if (page >= maxPage) {\n        loadBtn.classList.add('visually-hidden');\n    } else {\n        loadBtn.classList.remove('visually-hidden');\n    }\n}"],"names":["getData","userInput","page","axios","gallery","lightbox","SimpleLightbox","createMarkup","data","iziToast","markup","item","form","input","loader","loadBtn","maxPage","value","onFormSubmit","event","err","visabilityloadBtn","onClickBtn","height"],"mappings":"owBAEO,eAAeA,EAAQC,EAAWC,EAAM,CAC3C,GAAI,CAYA,OAXiB,MAAMC,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACJ,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACT,CACb,CAAS,GACe,IACnB,MAAe,CACZ,eAAQ,MAAM,UAAU,SAAS,MAAM,EAAE,EAClC,EACV,CACL,CCdA,MAAME,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIC,EAAW,IAAIC,EAAe,gBAAiB,CAC/C,aAAc,MACd,aAAc,GAClB,CAAC,EAEM,SAASC,EAAaC,EAAM,CAG/B,GAAIA,EAAK,KAAK,SAAW,EACrB,OAAOC,EAAS,MAAM,CAClB,QAAS,2EACT,SAAU,UACtB,CAAS,EAEL,MAAMC,EAASF,EAAK,KAAK,IAAIG,GACzB;AAAA,gDACwCA,EAAK,aAAa;AAAA,sDACZA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA,iEAGzBA,EAAK,KAAK;AAAA,iEACVA,EAAK,KAAK;AAAA,oEACPA,EAAK,QAAQ;AAAA,qEACZA,EAAK,SAAS;AAAA;AAAA,cAGnF,EAAM,KAAK,EAAE,EAETP,EAAQ,mBAAmB,YAAaM,CAAM,EAE9CL,EAAS,QAAS,CACtB,CC/BA,MAAMO,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,aAAa,EAC5CT,EAAU,SAAS,cAAc,UAAU,EAC3CU,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIb,EACAc,EACAC,EAIJL,EAAK,iBAAiB,SAAUM,CAAY,EAE5C,eAAeA,EAAaC,EAAO,CAK/B,GAJAA,EAAM,eAAc,EACpBjB,EAAO,EACPe,EAAQJ,EAAM,MAAM,KAAM,EAEtBI,IAAU,GACV,OAAAL,EAAK,MAAO,EAELH,EAAS,MAAM,CAClB,QAAS,0BACT,SAAU,UACtB,CAAS,EAILK,EAAO,UAAU,OAAO,iBAAiB,EACzC,GAAI,CACA,MAAMN,EAAO,MAAMR,EAAQiB,EAAOf,CAAI,EACtCc,EAAU,KAAK,KAAKR,EAAK,MAAQ,EAAE,EAEnCJ,EAAQ,UAAY,GAEpBG,EAAaC,CAAI,CACpB,OAAQY,EAAK,CACV,QAAQ,IAAIA,CAAG,CAClB,CAEDN,EAAO,UAAU,IAAI,iBAAiB,EACtCO,EAAmB,EACnBT,EAAK,MAAK,CACd,CAEAG,EAAQ,iBAAiB,QAASO,CAAU,EAE5C,eAAeA,GAAa,CACxBpB,GAAQ,EAERY,EAAO,UAAU,OAAO,iBAAiB,EAErCZ,IAASc,GACTP,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,UACtB,CAAS,EAGL,MAAMD,EAAO,MAAMR,EAAQiB,EAAOf,CAAI,EAEtCK,EAAaC,CAAI,EAEjBM,EAAO,UAAU,IAAI,iBAAiB,EACtCO,EAAmB,EAGnB,MAAME,EACFnB,EAAQ,kBAAkB,sBAAuB,EAAC,OAEtD,SAAS,CACL,SAAU,SACV,IAAKmB,EAAS,CACtB,CAAK,CACL,CAEA,SAASF,GAAoB,CACrBnB,GAAQc,EACRD,EAAQ,UAAU,IAAI,iBAAiB,EAEvCA,EAAQ,UAAU,OAAO,iBAAiB,CAElD"}